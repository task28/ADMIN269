<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - 10 Tasks</title>
    <style>
        body { font-family: sans-serif; background: #222; color: #fff; padding: 20px; }
        .container { max-width: 700px; margin: 0 auto; background: #333; padding: 20px; border-radius: 10px; }
        h2 { text-align: center; border-bottom: 1px solid #555; padding-bottom: 10px; }
        .box { background: #444; padding: 15px; margin-bottom: 20px; border-radius: 5px; border: 1px solid #555; }
        label { display: block; margin-bottom: 5px; color: #4facfe; font-weight: bold; }
        input, textarea { width: 100%; box-sizing: border-box; padding: 10px; margin-bottom: 10px; background: #222; border: 1px solid #666; color: white; border-radius: 5px; }
        textarea { height: 80px; font-family: monospace; font-size: 12px; border: 1px solid #e91e63; }
        button { width: 100%; padding: 15px; background: #27ae60; color: white; border: none; font-size: 18px; cursor: pointer; border-radius: 5px; font-weight: bold; }
        button:hover { background: #2ecc71; }
    </style>
</head>
<body>

<div class="container">
    <h2>Setup 10 Task Buttons & Ads</h2>
    <div id="form-container">Loading...</div>
    <button onclick="saveData()">SAVE SETTINGS</button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAa_T9MDAjSjQ4Us8C4O6Lqzus2d1_LRck",
    authDomain: "task-310c5.firebaseapp.com",
    projectId: "task-310c5",
    storageBucket: "task-310c5.firebasestorage.app",
    messagingSenderId: "503757001786",
    appId: "1:503757001786:web:3ba0943c3367c273de9103"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const formContainer = document.getElementById('form-container');

  // ১০টি বক্স তৈরি লুপ
  let html = "";
  for (let i = 1; i <= 10; i++) {
      html += `
        <div class="box">
            <label>Task Button ${i} Link:</label>
            <input type="text" id="link_${i}" placeholder="https://your-link-here.com">
            
            <label>Banner Ad Script ${i}:</label>
            <textarea id="ad_${i}" placeholder="Paste Adsterra Banner Script here..."></textarea>
        </div>
      `;
  }
  formContainer.innerHTML = html;

  // ডাটা লোড
  get(child(ref(db), 'admin_settings/page_1')).then((snapshot) => {
      if (snapshot.exists()) {
          const data = snapshot.val();
          for (let i = 1; i <= 10; i++) {
              if (data[`link_${i}`]) document.getElementById(`link_${i}`).value = data[`link_${i}`];
              if (data[`ad_${i}`]) document.getElementById(`ad_${i}`).value = data[`ad_${i}`];
          }
      }
  });

  // ডাটা সেভ
  window.saveData = function() {
      const updates = {};
      for (let i = 1; i <= 10; i++) {
          updates[`link_${i}`] = document.getElementById(`link_${i}`).value;
          updates[`ad_${i}`] = document.getElementById(`ad_${i}`).value;
      }
      set(ref(db, 'admin_settings/page_1'), updates)
      .then(() => alert("Saved Successfully!"))
      .catch((err) => alert("Error: " + err));
  }
</script>

</body>
</html>
