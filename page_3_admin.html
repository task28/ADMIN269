<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Page Setup</title>
    <style>
        body { font-family: sans-serif; background: #2c3e50; color: #fff; padding: 20px; }
        .container { max-width: 700px; margin: 0 auto; background: #34495e; padding: 20px; border-radius: 10px; }
        h2 { text-align: center; border-bottom: 1px solid #7f8c8d; padding-bottom: 10px; }
        .box { background: #222; padding: 15px; margin-bottom: 20px; border-radius: 5px; border: 1px solid #555; }
        label { display: block; margin-bottom: 5px; color: #3498db; font-weight: bold; }
        input, textarea { width: 100%; box-sizing: border-box; padding: 10px; margin-bottom: 10px; background: #1c1c1c; border: 1px solid #444; color: white; border-radius: 5px; }
        textarea { height: 80px; font-family: monospace; font-size: 12px; }
        button { width: 100%; padding: 15px; background: #e67e22; color: white; border: none; font-size: 18px; cursor: pointer; border-radius: 5px; font-weight: bold; }
        button:hover { background: #d35400; }
    </style>
</head>
<body>

<div class="container">
    <h2 id="page-title">Setup Page...</h2>
    <div id="form-container">Loading...</div>
    <button onclick="saveData()">SAVE SETTINGS</button>
</div>

<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAa_T9MDAjSjQ4Us8C4O6Lqzus2d1_LRck",
    authDomain: "task-310c5.firebaseapp.com",
    projectId: "task-310c5",
    storageBucket: "task-310c5.firebasestorage.app",
    messagingSenderId: "503757001786",
    appId: "1:503757001786:web:3ba0943c3367c273de9103"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // ============================================
  // শুধু এই সংখ্যাটি পরিবর্তন করবেন প্রতিটি পেজের জন্য
  // Page 3 এর জন্য 3, Page 4 এর জন্য 4... Page 9 এর জন্য 9 দিন
  const PAGE_NUMBER = 3; 
  // ============================================

  document.title = `Admin Panel - Page ${PAGE_NUMBER}`;
  document.getElementById('page-title').innerText = `Setup Page ${PAGE_NUMBER} (Ads & Links)`;
  const dbPath = `admin_settings/page_${PAGE_NUMBER}`;

  const formContainer = document.getElementById('form-container');

  // ফর্ম জেনারেট
  let html = "";
  for (let i = 1; i <= 10; i++) {
      html += `
        <div class="box">
            <label>Page ${PAGE_NUMBER} - Task ${i} Link:</label>
            <input type="text" id="link_${i}" placeholder="https://site.com">
            
            <label>Page ${PAGE_NUMBER} - Ad Script ${i}:</label>
            <textarea id="ad_${i}" placeholder="Paste Script Here..."></textarea>
        </div>
      `;
  }
  formContainer.innerHTML = html;

  // লোড ডেটা
  get(child(ref(db), dbPath)).then((snapshot) => {
      if (snapshot.exists()) {
          const data = snapshot.val();
          for (let i = 1; i <= 10; i++) {
              if (data[`link_${i}`]) document.getElementById(`link_${i}`).value = data[`link_${i}`];
              if (data[`ad_${i}`]) document.getElementById(`ad_${i}`).value = data[`ad_${i}`];
          }
      }
  });

  // সেভ ডেটা
  window.saveData = function() {
      const updates = {};
      for (let i = 1; i <= 10; i++) {
          updates[`link_${i}`] = document.getElementById(`link_${i}`).value;
          updates[`ad_${i}`] = document.getElementById(`ad_${i}`).value;
      }

      set(ref(db, dbPath), updates)
      .then(() => alert(`Page ${PAGE_NUMBER} Settings Saved!`))
      .catch((err) => alert("Error: " + err));
  }
</script>

</body>
</html>
